# SPDX-License-Identifier: LGPL-3.0-or-later
# AWS EC2 cloud-netconfig configuration

logging:
  level: info
  format: json  # JSON for CloudWatch Logs
  timestamps: true

server:
  listen:
    address: 127.0.0.1
    port: 5209

metadata:
  refresh_interval: 300s
  request_timeout: 10s
  retry:
    enabled: true
    max_attempts: 5  # More retries for EC2
    backoff: 10s

network:
  interfaces:
    # AWS secondary interfaces
    enabled:
      - eth1
      - eth2

  routing:
    table_base: 9999
    policy_routing: true

  mtu:
    auto_configure: true
    # AWS uses jumbo frames
    # override: 9001

# Force AWS provider with IMDSv2
cloud:
  auto_detect: false
  provider: aws
  aws:
    imds_version: 2  # Use IMDSv2 for enhanced security
    token_ttl: 21600

security:
  user: cloud-network
  capabilities:
    - CAP_NET_ADMIN
  watchdog:
    enabled: true
    interval: 30s

state:
  directory: /run/cloud-network
  persist_metadata: true
  per_interface_files: true

features:
  network_events: true
  cleanup_stale: true
  health_check: true
